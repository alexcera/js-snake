<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Sssssssssssnake</title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<script type="text/javascript">
	window.requestAnimFrame = (function(){
 		return window.requestAnimationFrame  	||
        	window.webkitRequestAnimationFrame	||
        	window.mozRequestAnimationFrame		||
        	function( callback ){
        		//fallback of 60fps
        		window.setTimeout(callback, 1000 / 60);
        	};
	})();

	var canvas, context;

	var DIRECTION = [
		'UP', 'DOWN', 'LEFT', 'RIGHT'
	];

	var SNAKE = {
		direction: DIRECTION[3],
		x: 100,
		y: 250,
		width: 100,
		height: 20
	}

	init();
	
	function init() {
		canvas = document.createElement( 'canvas' );
    	canvas.width = 400;
	    canvas.height = 400;
	    context = canvas.getContext( '2d' );
    	document.body.appendChild( canvas );
	}

	function animate() {
		requestAnimFrame(animate);
		draw();
	}
    
	function draw() {

		context.clearRect(0, 0, canvas.width, canvas.height);
		context.beginPath();
		context.rect(SNAKE.x, SNAKE.y, SNAKE.width, SNAKE.height);	
	    context.fill();
	    context.stroke();

	    var newDirection;
	    if (SNAKE.direction === DIRECTION[3] || SNAKE.direction === DIRECTION[2]) {
	    	var index = Math.floor((Math.random()*2));
	    	newDirection = DIRECTION[ index ];
	    }

	    if (SNAKE.direction === DIRECTION[0] || SNAKE.direction === DIRECTION[1]) {
	    	var index = Math.floor((Math.random()*3) + 1);
	    	newDirection = DIRECTION[ index ];
	    }

	    SNAKE.direction = newDirection;

	    if (newDirection === DIRECTION[0]) {
	    	SNAKE.y = SNAKE.y + 1;
	    }

	    if (newDirection === DIRECTION[1]) {
	    	SNAKE.y = SNAKE.y - 1;
	    }

	    if (newDirection === DIRECTION[2]) {
	    	SNAKE.x = SNAKE.x - 1;
	    }

	    if (newDirection === DIRECTION[3]) {
	    	SNAKE.x = SNAKE.x + 1;
	    }
	}

	document.onkeydown = function() {
    switch (window.event.keyCode) {
        case 37:
            animate();
            break;
        case 38:
            animate();
            break;
        case 39:
            animate();
            break;
        case 40:
            animate();
            break;
    }
};
	</script>
</body>
</html>